{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Siraceddin\\\\Desktop\\\\HTML STUFF\\\\HW\\\\project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{Form,Button,Card,Container,Alert}from\"react-bootstrap\";import{useAuth}from\"../contexts/AuthContext\";import{Link,useHistory}from\"react-router-dom\";export default function UpdateProfile(){var emailRef=useRef();var passwordRef=useRef();var passwordConfRef=useRef();var _useAuth=useAuth(),currentUser=_useAuth.currentUser,updatePassword=_useAuth.updatePassword,updateEmail=_useAuth.updateEmail;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var history=useHistory();function handleSubmit(event){event.preventDefault();//Password confirmation to check if the password is == to the re-entered password\nif(passwordRef.current.value!==passwordConfRef.current.value){return setError(\"Passwords do not match\");}//if the changes email is different than the current email push to promises \n//also push new password into promises\nvar promises=[];setLoading(true);setError(\"\");if(emailRef.current.value!==currentUser.email){promises.push(updateEmail(emailRef.current.value));}if(passwordRef.current.value){promises.push(updatePassword(passwordRef.current.value));}Promise.all(promises).then(function(){history.push(\"/profile\");}).catch(function(){setError(\"Failed to update profile\");}).finally(function(){setLoading(false);});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,{className:\"d-flex align-items-center justify-content-center\",style:{minHeight:\"100vh\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100\",style:{maxWidth:\"400px\"}},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center md-4\"},\"Update Profile\"),error&&/*#__PURE__*/React.createElement(Alert,{variant:\"danger\"},error),/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{id:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",ref:emailRef,required:true,defaultValue:currentUser.email})),/*#__PURE__*/React.createElement(Form.Group,{id:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",ref:passwordRef,placeholder:\"Leave blank to keep the same\"})),/*#__PURE__*/React.createElement(Form.Group,{id:\"password-confirm\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Re-Enter Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",ref:passwordConfRef,placeholder:\"Leave blank to keep the same\"})),/*#__PURE__*/React.createElement(Button,{disabled:loading,className:\"w-100\",type:\"submit\"},\"Update\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 text-center mt-2\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile\"},\"Cancle\")))));}","map":{"version":3,"sources":["C:/Users/Siraceddin/Desktop/HTML STUFF/HW/project-3/client/src/pages/UpdateProfile.js"],"names":["React","useRef","useState","Form","Button","Card","Container","Alert","useAuth","Link","useHistory","UpdateProfile","emailRef","passwordRef","passwordConfRef","currentUser","updatePassword","updateEmail","error","setError","loading","setLoading","history","handleSubmit","event","preventDefault","current","value","promises","email","push","Promise","all","then","catch","finally","minHeight","maxWidth"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { Form, Button, Card, Container, Alert  } from \"react-bootstrap\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport {Link, useHistory} from \"react-router-dom\";\r\n\r\nexport default function UpdateProfile() {\r\n    const emailRef = useRef();\r\n    const passwordRef = useRef();\r\n    const passwordConfRef = useRef();\r\n    const { currentUser, updatePassword, updateEmail } = useAuth();\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const history = useHistory();\r\n  \r\n    function handleSubmit(event) {\r\n      event.preventDefault();\r\n  \r\n      //Password confirmation to check if the password is == to the re-entered password\r\n      if(passwordRef.current.value !== passwordConfRef.current.value) {\r\n        return setError(\"Passwords do not match\");\r\n      }\r\n\r\n      //if the changes email is different than the current email push to promises \r\n      //also push new password into promises\r\n      const promises = [];\r\n      setLoading(true);\r\n      setError(\"\");\r\n\r\n      if(emailRef.current.value !== currentUser.email) {\r\n          promises.push(updateEmail(emailRef.current.value));\r\n      }\r\n      if(passwordRef.current.value) {\r\n          promises.push(updatePassword(passwordRef.current.value))\r\n      }\r\n      Promise.all(promises)\r\n        .then(() => {\r\n            history.push(\"/profile\")\r\n        })\r\n        .catch(() => {\r\n            setError(\"Failed to update profile\")\r\n        })\r\n        .finally(() => {\r\n            setLoading(false);\r\n        })\r\n    }\r\n  \r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{minHeight: \"100vh\"}}>\r\n                <div className=\"w-100\" style={{maxWidth: \"400px\"}}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                        <h2 className=\"text-center md-4\">Update Profile</h2>\r\n                        {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                        <Form onSubmit={handleSubmit}>\r\n                            <Form.Group id=\"email\">\r\n                                <Form.Label>Email</Form.Label>\r\n                                <Form.Control type=\"email\" ref={emailRef} required defaultValue={currentUser.email}/>\r\n                            </Form.Group>\r\n                            <Form.Group id=\"password\">\r\n                                <Form.Label>Password</Form.Label>\r\n                                <Form.Control type=\"password\" ref={passwordRef}  placeholder=\"Leave blank to keep the same\"/>\r\n                            </Form.Group>\r\n                            <Form.Group id=\"password-confirm\">\r\n                                <Form.Label>Re-Enter Password</Form.Label>\r\n                                <Form.Control type=\"password\" ref={passwordConfRef}  placeholder=\"Leave blank to keep the same\"/>\r\n                            </Form.Group>\r\n                            <Button disabled={loading} className=\"w-100\" type=\"submit\">Update</Button>\r\n                        </Form>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        <Link to=\"/profile\">Cancle</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\n  "]},"metadata":{},"sourceType":"module"}